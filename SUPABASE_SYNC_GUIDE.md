# ìˆ˜íŒŒë² ì´ìŠ¤ ì—°ë™ ì™„ë£Œ ê°€ì´ë“œ

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìƒì„±
- `schedules`: ì¼ì • ë°ì´í„° ì €ì¥
- `payments`: ê²°ì œ ì •ë³´ ì €ì¥  
- `holidays`: ì»¤ìŠ¤í…€ íœ´ì¼ ì €ì¥

### 2. ì½”ë“œ ìˆ˜ì • ì‚¬í•­
- **database.js**: ëª¨ë“  í…Œì´ë¸”ì— ëŒ€í•œ CRUD í•¨ìˆ˜ ì¶”ê°€
- **script.js**: ë¡œì»¬ ì €ì¥ ì‹œ ìˆ˜íŒŒë² ì´ìŠ¤ ë™ê¸°í™” ì¶”ê°€

---

## ğŸš€ ì„¤ì • ë°©ë²•

### Step 1: SQL ì‹¤í–‰

`SUPABASE_TABLES_SQL.md` íŒŒì¼ì„ ì—´ê³ :

1. ìˆ˜íŒŒë² ì´ìŠ¤ ëŒ€ì‹œë³´ë“œ ì ‘ì†
2. SQL Editor ë©”ë‰´ ì„ íƒ
3. íŒŒì¼ì— ìˆëŠ” SQLì„ **ìˆœì„œëŒ€ë¡œ** ì‹¤í–‰:
   - schedules í…Œì´ë¸”
   - payments í…Œì´ë¸”  
   - holidays í…Œì´ë¸”

### Step 2: í…Œì´ë¸” í™•ì¸

Table Editorì—ì„œ 3ê°œ í…Œì´ë¸”ì´ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸:
- âœ… schedules
- âœ… payments
- âœ… holidays

### Step 3: ì½”ë“œ ë°°í¬

```bash
git add .
git commit -m "feat: ìˆ˜íŒŒë² ì´ìŠ¤ schedules, payments, holidays í…Œì´ë¸” ì—°ë™"
git push origin main
```

---

## ğŸ“Š ë™ì‘ ë°©ì‹

### ì¼ì • ë°ì´í„° (Schedules)

**ì €ì¥ ì‹œ**:
1. `saveTeacherScheduleData()` í˜¸ì¶œ
2. ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
3. ìˆ˜íŒŒë² ì´ìŠ¤ `schedules` í…Œì´ë¸”ì— ìë™ ë™ê¸°í™”

**ë¡œë“œ ì‹œ**:
1. `loadTeacherScheduleData()` í˜¸ì¶œ
2. ìˆ˜íŒŒë² ì´ìŠ¤ì—ì„œ ë¨¼ì € ë¡œë“œ ì‹œë„
3. ì‹¤íŒ¨ ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë°±ì—… ë¡œë“œ

### íœ´ì¼ ë°ì´í„° (Holidays)

**ì €ì¥ ì‹œ**:
1. `saveDaySettings()` í˜¸ì¶œ
2. ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
3. ìˆ˜íŒŒë² ì´ìŠ¤ `holidays` í…Œì´ë¸”ì— ìë™ ë™ê¸°í™”

**ë¡œë“œ ì‹œ**:
1. `loadAndCleanData()` í˜¸ì¶œ
2. ìˆ˜íŒŒë² ì´ìŠ¤ì—ì„œ ë¨¼ì € ë¡œë“œ ì‹œë„
3. ì‹¤íŒ¨ ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë°±ì—… ë¡œë“œ

### ê²°ì œ ë°ì´í„° (Payments)

í˜„ì¬ëŠ” í•¨ìˆ˜ë§Œ ì¤€ë¹„ë˜ì–´ ìˆê³ , ê²°ì œ UIì—ì„œ í˜¸ì¶œ ì‹œ ì‚¬ìš© ê°€ëŠ¥:
- `savePaymentToDatabase()`
- `getPaymentsByMonth()`
- `getPaymentsByStudent()`

---

## ğŸ”§ ì£¼ìš” í•¨ìˆ˜

### Schedules
```javascript
// ì¼ì • ì €ì¥
await saveScheduleToDatabase({
    teacherId: 'teacher_id',
    studentId: 123,
    date: '2026-01-28',
    startTime: '16:00',
    duration: 90
});

// ì¼ì • ì¡°íšŒ
const schedules = await getSchedulesByTeacher('teacher_id');
const studentSchedules = await getSchedulesByStudent(123);

// ì¼ì • ì‚­ì œ
await deleteScheduleFromDatabase(123, '2026-01-28');
```

### Holidays
```javascript
// íœ´ì¼ ì €ì¥
await saveHolidayToDatabase({
    teacherId: 'teacher_id',
    date: '2026-01-01',
    name: 'ì‹ ì •',
    color: '#ef4444'
});

// íœ´ì¼ ì¡°íšŒ
const holidays = await getHolidaysByTeacher('teacher_id');

// íœ´ì¼ ì‚­ì œ
await deleteHolidayFromDatabase('teacher_id', '2026-01-01');
```

### Payments
```javascript
// ê²°ì œ ì €ì¥
await savePaymentToDatabase({
    teacherId: 'teacher_id',
    studentId: 123,
    month: '2026-01',
    amount: 250000,
    paidAmount: 250000,
    status: 'paid',
    paymentDate: '2026-01-05'
});

// ê²°ì œ ì¡°íšŒ
const payments = await getPaymentsByMonth('teacher_id', '2026-01');
const studentPayments = await getPaymentsByStudent(123);
```

---

## ğŸ¯ ê¸°ëŒ€ íš¨ê³¼

1. **ë¡œì»¬â†”ë°°í¬ ë™ê¸°í™”**: ë¡œì»¬ì—ì„œ ìˆ˜ì •í•œ ë‚´ìš©ì´ ë°°í¬ í™˜ê²½ì— ìë™ ë°˜ì˜
2. **ë°ì´í„° ë°±ì—…**: ìˆ˜íŒŒë² ì´ìŠ¤ì— ëª¨ë“  ë°ì´í„° ì•ˆì „í•˜ê²Œ ì €ì¥
3. **ë‹¤ì¤‘ ê¸°ê¸° ì§€ì›**: ì—¬ëŸ¬ ê¸°ê¸°ì—ì„œ ë™ì¼í•œ ë°ì´í„° ì ‘ê·¼ ê°€ëŠ¥
4. **ì‹¤ì‹œê°„ ë™ê¸°í™”**: ë³€ê²½ ì‚¬í•­ì´ ì¦‰ì‹œ DBì— ë°˜ì˜

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **SQL ì‹¤í–‰ ìˆœì„œ**: ë°˜ë“œì‹œ schedules â†’ payments â†’ holidays ìˆœì„œë¡œ ì‹¤í–‰
2. **ê¸°ì¡´ ë°ì´í„°**: ì²« ë°°í¬ í›„ ë¡œì»¬ ë°ì´í„°ê°€ ìë™ìœ¼ë¡œ ìˆ˜íŒŒë² ì´ìŠ¤ì— ë™ê¸°í™”ë¨
3. **ì—ëŸ¬ ì²˜ë¦¬**: DB ì €ì¥ ì‹¤íŒ¨ ì‹œ ë¡œì»¬ì—ë§Œ ì €ì¥ë˜ë¯€ë¡œ ì•ˆì „

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. ì¼ì • í…ŒìŠ¤íŠ¸
1. í•™ìƒì—ê²Œ ì¼ì • ë“±ë¡
2. í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
3. ìˆ˜íŒŒë² ì´ìŠ¤ Table Editorì—ì„œ `schedules` í…Œì´ë¸” í™•ì¸

### 2. íœ´ì¼ í…ŒìŠ¤íŠ¸  
1. ë‹¬ë ¥ì—ì„œ ë‚ ì§œ í´ë¦­ â†’ ê³µíœ´ì¼ ì„¤ì •
2. í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
3. ìˆ˜íŒŒë² ì´ìŠ¤ Table Editorì—ì„œ `holidays` í…Œì´ë¸” í™•ì¸

### 3. ë°°í¬ í™˜ê²½ í…ŒìŠ¤íŠ¸
1. ë¡œì»¬ì—ì„œ ë°ì´í„° ìˆ˜ì •
2. Git push
3. ë°°í¬ ì‚¬ì´íŠ¸ì—ì„œ ë™ì¼í•œ ë°ì´í„° í™•ì¸

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„ (ì„ íƒì‚¬í•­)

ê²°ì œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•œë‹¤ë©´:
1. ê²°ì œ UI ìˆ˜ì • ì‹œ `savePaymentToDatabase()` í˜¸ì¶œ ì¶”ê°€
2. ê²°ì œ ì¡°íšŒ ì‹œ `getPaymentsByMonth()` ì‚¬ìš©

---

## ğŸ’¡ ë¬¸ì œ í•´ê²°

### Q: ë°ì´í„°ê°€ ë™ê¸°í™”ë˜ì§€ ì•Šì•„ìš”
**A**: ë¸Œë¼ìš°ì € ì½˜ì†”(F12)ì—ì„œ ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸
- "Function not defined" â†’ SQL ì‹¤í–‰ í™•ì¸
- "RLS policy violation" â†’ ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸

### Q: ë¡œì»¬ê³¼ ë°°í¬ ë°ì´í„°ê°€ ë‹¬ë¼ìš”
**A**: 
1. ë‘ í™˜ê²½ ëª¨ë‘ ë¡œê·¸ì•„ì›ƒ í›„ ì¬ë¡œê·¸ì¸
2. ìˆ˜íŒŒë² ì´ìŠ¤ Table Editorì—ì„œ ë°ì´í„° ì§ì ‘ í™•ì¸
3. í•„ìš”ì‹œ í•œìª½ ë°ì´í„° ì‚­ì œ í›„ ì¬ë™ê¸°í™”

---

## âœ¨ ì™„ë£Œ!

ì´ì œ ë¡œì»¬ì—ì„œ ìˆ˜ì •í•œ ì¼ì •, íœ´ì¼ ë°ì´í„°ê°€ ìë™ìœ¼ë¡œ ìˆ˜íŒŒë² ì´ìŠ¤ì— ì €ì¥ë˜ì–´  
ë°°í¬ í™˜ê²½ì—ì„œë„ ë™ì¼í•˜ê²Œ ë³´ì…ë‹ˆë‹¤! ğŸ‰
